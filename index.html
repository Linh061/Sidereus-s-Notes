<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <!-- 标题 -->
  <title>Sidereus's Notes</title>
  <!-- 移动端适配（优化） -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
  <!-- Docsify 主题 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsify@4/lib/themes/vue.css">
  <!-- KaTeX 数学公式样式 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
  <!-- 可选：导航栏样式优化（解决二级菜单hover不显示） -->
  <style>
    .navbar-nav li:hover > ul { display: block !important; }
    /* 移动端适配导航栏 */
    @media (max-width: 768px) {
      .navbar { padding: 0 10px !important; }
    }
  </style>
</head>

<body>
  <!-- Docsify 根容器 -->
  <div id="app">Loading…</div>

  <!-- Docsify 核心配置 -->
  <script>
    window.$docsify = {
      /* ===== 基本信息 ===== */
      name: "Sidereus's Notes",
      repo: 'Linh061/Sidereus-s-Notes',
      basePath: '/Sidereus-s-Notes/', // 关键：匹配 GitHub Pages 路径

      /* ===== 文档结构（侧边栏+导航栏核心配置） ===== */
      loadSidebar: true, // 读取根目录 _sidebar.md
      sidebarDepth: 3,   // 侧边栏目录层级
      loadNavbar: true,  // 新增：读取根目录 _navbar.md（核心）
      alias: {           // 新增：路径别名容错（避免导航栏/侧边栏路径解析失败）
        '/_sidebar.md': '/Sidereus-s-Notes/_sidebar.md',
        '/_navbar.md': '/Sidereus-s-Notes/_navbar.md'
      },

      /* ===== 搜索插件 ===== */
      search: {
        paths: 'auto',
        placeholder: 'Search',
        noData: 'No results found',
        depth: 6
      },

      /* ===== 分页插件 ===== */
      pagination: {
        previousText: 'Previous',
        nextText: 'Next',
        crossChapter: true
      },

      /* ===== Giscus 评论区钩子 ===== */
      plugins: [
        function (hook, vm) {
          // 1. 插入评论区容器
          hook.afterEach(function (html) {
            return html + `
              <div id="giscus-container" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #eee;"></div>
            `;
          });

          // 2. 加载 Giscus 脚本
          hook.doneEach(function () {
            if (document.getElementById('giscus-script')) return;
            const giscusScript = document.createElement('script');
            giscusScript.id = 'giscus-script';
            giscusScript.src = 'https://giscus.app/client.js';
            giscusScript.async = true;
            giscusScript.crossOrigin = 'anonymous';
            // Giscus 参数（已填你的值）
            giscusScript.setAttribute('data-repo', 'Linh061/Sidereus-s-Notes');
            giscusScript.setAttribute('data-repo-id', 'R_kgDOQo2YYw');
            giscusScript.setAttribute('data-category', 'Announcements');
            giscusScript.setAttribute('data-category-id', 'DIC_kwDOQo2YY84CzzgT');
            giscusScript.setAttribute('data-mapping', 'pathname');
            giscusScript.setAttribute('data-strict', '0');
            giscusScript.setAttribute('data-reactions-enabled', '1');
            giscusScript.setAttribute('data-emit-metadata', '0');
            giscusScript.setAttribute('data-input-position', 'bottom');
            giscusScript.setAttribute('data-theme', 'preferred_color_scheme');
            giscusScript.setAttribute('data-lang', 'zh-CN');
            // 将脚本插入评论区容器
            document.getElementById('giscus-container').appendChild(giscusScript);
          });
        }
      ]
    }
  </script>

  <!-- Docsify 核心 -->
  <script src="https://cdn.jsdelivr.net/npm/docsify@4"></script>
  <!-- 搜索插件 -->
  <script src="https://cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>
  <!-- 分页插件 -->
  <script src="https://cdn.jsdelivr.net/npm/docsify-pagination@1.0.1/dist/docsify-pagination.min.js"></script>
  <!-- LaTeX 数学公式渲染 -->
  <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/docsify-latex@0.1.1/dist/docsify-latex.min.js"></script>
</body>
</html>
